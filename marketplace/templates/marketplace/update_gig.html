{% extends 'marketplace/base.html' %}

{% block title %}Update Gig - AdEzy{% endblock %}

{% block content %}
<div class="container">
    <div style="max-width: 700px; margin: 60px auto;">
        <div class="glass-panel">
            <h2 style="text-align: center; margin-bottom: 30px;">Update Your Gig</h2>
            
            {% if messages %}
                {% for message in messages %}
                    <div style="padding: 15px; margin-bottom: 20px; background: {% if message.tags == 'error' %}#fee; border: 1px solid #fcc{% else %}#efe; border: 1px solid #cfc{% endif %}; border-radius: 8px; color: var(--deep-blue);">
                        {{ message }}
                    </div>
                {% endfor %}
            {% endif %}
            
            <form method="post" action="{% url 'update-gig' gig.id %}" enctype="multipart/form-data">
                {% csrf_token %}
                
                <div style="margin-bottom: 20px;">
                    <label style="display: block; margin-bottom: 8px; font-weight: 600; color: var(--deep-blue);">
                        Gig Title *
                    </label>
                    <input 
                        type="text" 
                        name="title" 
                        class="search-input" 
                        placeholder="E.g., I will create professional Facebook ads"
                        value="{{ gig.title }}"
                        required
                        style="width: 100%;"
                    >
                </div>
                
                <div style="margin-bottom: 20px;">
                    <label style="display: block; margin-bottom: 8px; font-weight: 600; color: var(--deep-blue);">
                        Description *
                    </label>
                    <textarea 
                        name="description" 
                        class="search-input" 
                        placeholder="Describe your service in detail..."
                        required
                        rows="6"
                        style="width: 100%; resize: vertical; font-family: inherit;"
                    >{{ gig.description }}</textarea>
                </div>
                
                <div style="margin-bottom: 20px;">
                    <label style="display: block; margin-bottom: 8px; font-weight: 600; color: var(--deep-blue);">
                        Category
                    </label>
                    <select 
                        name="category" 
                        class="search-input" 
                        style="width: 100%;"
                    >
                        <option value="">Select a category</option>
                        {% for category in categories %}
                            <option value="{{ category.id }}" {% if gig.category.id == category.id %}selected{% endif %}>{{ category.name }}</option>
                        {% endfor %}
                    </select>
                </div>
                
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 20px;">
                    <div>
                        <label style="display: block; margin-bottom: 8px; font-weight: 600; color: var(--deep-blue);">
                            Price (Taka) *
                        </label>
                        <input 
                            type="number" 
                            name="price" 
                            class="search-input" 
                            placeholder="500"
                            value="{{ gig.price }}"
                            min="1"
                            step="0.01"
                            required
                            style="width: 100%;"
                        >
                    </div>
                    
                    <div>
                        <label style="display: block; margin-bottom: 8px; font-weight: 600; color: var(--deep-blue);">
                            Delivery Time (Days) *
                        </label>
                        <input 
                            type="number" 
                            name="delivery_time" 
                            class="search-input" 
                            placeholder="3"
                            value="{{ gig.delivery_time }}"
                            min="1"
                            required
                            style="width: 100%;"
                        >
                    </div>
                </div>
                
                <div style="margin-bottom: 25px;">
                    <label style="display: block; margin-bottom: 8px; font-weight: 600; color: var(--deep-blue);">
                        Gig Image
                    </label>
                    {% if gig.image %}
                        <div style="margin-bottom: 15px; border: 2px solid var(--gold); border-radius: 8px; overflow: hidden;">
                            <img src="{{ gig.image.url }}" alt="Current gig image" style="width: 100%; display: block;">
                        </div>
                        <p style="margin-bottom: 10px; font-size: 0.9rem; color: #64748b;">
                            Current image shown above. Upload a new file to replace it.
                        </p>
                    {% endif %}
                    <input 
                        type="file" 
                        name="image" 
                        accept="image/*"
                        class="search-input"
                        style="width: 100%; padding: 10px;"
                    >
                    <p style="margin-top: 8px; font-size: 0.9rem; color: #64748b;">
                        {% if gig.image %}Leave empty to keep current image.{% endif %} Recommended: 800x600px or similar aspect ratio
                    </p>
                </div>
                
                <button type="submit" class="btn btn-primary" style="width: 100%; padding: 15px;">
                    Update Gig
                </button>
            </form>
            
            <p style="text-align: center; margin-top: 20px; color: #64748b;">
                <a href="{% url 'dashboard' %}" style="color: var(--gold); font-weight: 600; text-decoration: none;">
                    ‚Üê Back to Dashboard
                </a>
            </p>
        </div>
    </div>
</div>
{% endblock %}
